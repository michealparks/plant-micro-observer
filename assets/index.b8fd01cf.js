import{d as t,w as e,S as s,i as n,s as a,e as l,c,a as o,b as r,f as i,g as u,l as f,n as h,h as d,j as p,k as m,m as v,r as g,o as $,p as x,t as y,q as E,u as w,v as b,x as U,y as N,z as T,A as k,B as I,C as O,D as L,E as j,F as A,G as D,H as B,I as P,J as R,K as S,L as M,M as C,N as V,O as q,P as _,Q as z,R as G,T as X,U as J,V as K}from"./vendor.0ca2dde3.js";const F=e(void 0),H=e([]),Q=e(""),Y=t([H,Q],(([t,e])=>""===e?t:t.filter((t=>JSON.stringify(t).toLowerCase().includes(e.toLowerCase())))));function W(t){let e,s,n;return{c(){e=l("button"),this.h()},l(t){e=c(t,"BUTTON",{title:!0,class:!0}),o(e).forEach(r),this.h()},h(){i(e,"title","clear search"),i(e,"class","icon-cross svelte-1wd78n3")},m(a,l){u(a,e,l),s||(n=f(e,"click",t[3]),s=!0)},p:h,d(t){t&&r(e),s=!1,n()}}}function Z(t){let e,s,n,a,$,x,y,E,w=t[0].length>0&&W(t);return{c(){e=l("nav"),s=l("button"),n=d(),a=l("div"),$=l("input"),x=d(),w&&w.c(),this.h()},l(t){e=c(t,"NAV",{class:!0});var l=o(e);s=c(l,"BUTTON",{title:!0,class:!0}),o(s).forEach(r),n=p(l),a=c(l,"DIV",{class:!0});var i=o(a);$=c(i,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),x=p(i),w&&w.l(i),i.forEach(r),l.forEach(r),this.h()},h(){i(s,"title","search"),i(s,"class","icon-search svelte-1wd78n3"),i($,"id","search-input"),i($,"type","search"),i($,"placeholder","search"),i($,"class","svelte-1wd78n3"),i(a,"class","search svelte-1wd78n3"),i(e,"class","svelte-1wd78n3")},m(l,c){u(l,e,c),m(e,s),m(e,n),m(e,a),m(a,$),v($,t[0]),m(a,x),w&&w.m(a,null),y||(E=[f(s,"click",t[1]),f($,"input",t[4]),f($,"keypress",t[2])],y=!0)},p(t,[e]){1&e&&v($,t[0]),t[0].length>0?w?w.p(t,e):(w=W(t),w.c(),w.m(a,null)):w&&(w.d(1),w=null)},i:h,o:h,d(t){t&&r(e),w&&w.d(),y=!1,g(E)}}}function tt(t,e,s){let n;$(t,Q,(t=>s(5,n=t)));let a="";const l=()=>{x(Q,n=a.trim(),n)};return[a,l,t=>{if("Enter"===t.key){const e=t.target;l(),e.blur()}},()=>{x(Q,n="",n),s(0,a="")},function(){a=this.value,s(0,a)}]}class et extends s{constructor(t){super(),n(this,t,tt,Z,a,{})}}function st(t,e,s){const n=t.slice();return n[3]=e[s],n}function nt(t){let e,s,n=t[3].group+"";return{c(){e=l("p"),s=y(n),this.h()},l(t){e=c(t,"P",{class:!0});var a=o(e);s=E(a,n),a.forEach(r),this.h()},h(){i(e,"class","svelte-tcfkj5")},m(t,n){u(t,e,n),m(e,s)},p(t,e){1&e&&n!==(n=t[3].group+"")&&w(s,n)},d(t){t&&r(e)}}}function at(t,e){let s,n,a,h,v,g,$,x=e[3].group&&nt(e);function y(){return e[2](e[3])}return{key:t,first:null,c(){s=l("div"),n=l("img"),h=d(),x&&x.c(),v=d(),this.h()},l(t){s=c(t,"DIV",{class:!0});var e=o(s);n=c(e,"IMG",{loading:!0,alt:!0,src:!0,class:!0}),h=p(e),x&&x.l(e),v=p(e),e.forEach(r),this.h()},h(){i(n,"loading","lazy"),i(n,"alt","Plant"),n.src!==(a=e[3].objectURL)&&i(n,"src",a),i(n,"class","svelte-tcfkj5"),i(s,"class","svelte-tcfkj5"),this.first=s},m(t,e){u(t,s,e),m(s,n),m(s,h),x&&x.m(s,null),m(s,v),g||($=f(s,"click",y),g=!0)},p(t,l){e=t,1&l&&n.src!==(a=e[3].objectURL)&&i(n,"src",a),e[3].group?x?x.p(e,l):(x=nt(e),x.c(),x.m(s,v)):x&&(x.d(1),x=null)},d(t){t&&r(s),x&&x.d(),g=!1,$()}}}function lt(t){let e,s=[],n=new Map,a=t[0];const f=t=>t[3].id;for(let l=0;l<a.length;l+=1){let e=st(t,a,l),c=f(e);n.set(c,s[l]=at(c,e))}return{c(){e=l("section");for(let t=0;t<s.length;t+=1)s[t].c();this.h()},l(t){e=c(t,"SECTION",{class:!0});var n=o(e);for(let e=0;e<s.length;e+=1)s[e].l(n);n.forEach(r),this.h()},h(){i(e,"class","svelte-tcfkj5")},m(t,n){u(t,e,n);for(let a=0;a<s.length;a+=1)s[a].m(e,null)},p(t,[l]){3&l&&(a=t[0],s=b(s,l,f,1,t,a,n,e,U,at,null,st))},i:h,o:h,d(t){t&&r(e);for(let e=0;e<s.length;e+=1)s[e].d()}}}function ct(t,e,s){let n,a;$(t,Y,(t=>s(0,n=t))),$(t,F,(t=>s(1,a=t)));return[n,a,t=>{x(F,a=t,a)}]}class ot extends s{constructor(t){super(),n(this,t,ct,lt,a,{})}}const rt=async t=>{const e=await t.arrayBuffer();return new Blob([new Uint8Array(e)],{type:t.type})};function it(t){let e,s,n,a,v,g;return{c(){e=l("label"),s=l("button"),n=d(),a=l("input"),this.h()},l(t){e=c(t,"LABEL",{for:!0,class:!0});var l=o(e);s=c(l,"BUTTON",{title:!0,class:!0}),o(s).forEach(r),l.forEach(r),n=p(t),a=c(t,"INPUT",{id:!0,type:!0,accept:!0,capture:!0,class:!0}),this.h()},h(){i(s,"title","upload image"),i(s,"class","icon-camera svelte-5oq8da"),i(e,"for","image-upload"),i(e,"class","svelte-5oq8da"),i(a,"id","image-upload"),i(a,"type","file"),i(a,"accept","image/*"),i(a,"capture",""),i(a,"class","svelte-5oq8da")},m(l,c){u(l,e,c),m(e,s),u(l,n,c),u(l,a,c),v||(g=f(a,"change",t[0]),v=!0)},p:h,i:h,o:h,d(t){t&&r(e),t&&r(n),t&&r(a),v=!1,g()}}}function ut(t,e,s){let n;$(t,F,(t=>s(1,n=t)));var a=this&&this.__awaiter||function(t,e,s,n){return new(s||(s=Promise))((function(a,l){function c(t){try{r(n.next(t))}catch(e){l(e)}}function o(t){try{r(n.throw(t))}catch(e){l(e)}}function r(t){var e;t.done?a(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(c,o)}r((n=n.apply(t,e||[])).next())}))};return[t=>a(void 0,void 0,void 0,(function*(){const e=t.target,s=e.files[0];if(void 0===s)return;const a=yield rt(s);x(F,n={blob:a,id:N(),datetime:Date.now(),objectURL:URL.createObjectURL(a),group:"",notes:"",annotations:[],temp:!0},n),e.value=""}))]}class ft extends s{constructor(t){super(),n(this,t,ut,it,a,{})}}function ht(t){let e,s,n,a,$,x;return{c(){e=l("div"),s=l("div"),n=d(),a=l("input"),this.h()},l(t){e=c(t,"DIV",{class:!0,style:!0});var l=o(e);s=c(l,"DIV",{class:!0}),o(s).forEach(r),n=p(l),a=c(l,"INPUT",{class:!0}),l.forEach(r),this.h()},h(){i(s,"class","arm svelte-1o8eoiu"),i(a,"class","svelte-1o8eoiu"),i(e,"class","dot svelte-1o8eoiu"),T(e,"transform","translate("+t[1]+"px, "+t[2]+"px)")},m(l,c){u(l,e,c),m(e,s),m(e,n),m(e,a),v(a,t[0]),$||(x=[f(a,"input",t[4]),f(e,"click",t[3])],$=!0)},p(t,[s]){1&s&&a.value!==t[0]&&v(a,t[0]),6&s&&T(e,"transform","translate("+t[1]+"px, "+t[2]+"px)")},i:h,o:h,d(t){t&&r(e),$=!1,g(x)}}}function dt(t,e,s){let{x:n}=e,{y:a}=e,{text:l}=e;return t.$$set=t=>{"x"in t&&s(1,n=t.x),"y"in t&&s(2,a=t.y),"text"in t&&s(0,l=t.text)},[l,n,a,t=>{t.stopPropagation()},function(){l=this.value,s(0,l)}]}class pt extends s{constructor(t){super(),n(this,t,dt,ht,a,{x:1,y:2,text:0})}}function mt(t,e,s){const n=t.slice();return n[5]=e[s],n[6]=e,n[7]=s,n}function vt(t){let e,s,n,a,h,v,g,$=[],x=new Map,y=t[1].annotations;const E=t=>t[5].id;for(let l=0;l<y.length;l+=1){let e=mt(t,y,l),s=E(e);x.set(s,$[l]=gt(s,e))}return{c(){e=l("section"),s=l("img"),a=d();for(let t=0;t<$.length;t+=1)$[t].c();this.h()},l(t){e=c(t,"SECTION",{class:!0});var n=o(e);s=c(n,"IMG",{alt:!0,loading:!0,src:!0,class:!0}),a=p(n);for(let e=0;e<$.length;e+=1)$[e].l(n);n.forEach(r),this.h()},h(){i(s,"alt",""),i(s,"loading","lazy"),s.src!==(n=t[1].objectURL)&&i(s,"src",n),i(s,"class","svelte-j0poxe"),i(e,"class","svelte-j0poxe")},m(n,l){u(n,e,l),m(e,s),t[3](s),m(e,a);for(let t=0;t<$.length;t+=1)$[t].m(e,null);h=!0,v||(g=f(s,"click",t[2]),v=!0)},p(t,a){(!h||2&a&&s.src!==(n=t[1].objectURL))&&i(s,"src",n),2&a&&(y=t[1].annotations,k(),$=b($,a,E,1,t,y,x,e,I,gt,null,mt),O())},i(t){if(!h){for(let t=0;t<y.length;t+=1)L($[t]);h=!0}},o(t){for(let e=0;e<$.length;e+=1)j($[e]);h=!1},d(s){s&&r(e),t[3](null);for(let t=0;t<$.length;t+=1)$[t].d();v=!1,g()}}}function gt(t,e){let s,n,a,l;function c(t){e[4](t,e[5])}let o={x:e[5].x,y:e[5].y};return void 0!==e[5].text&&(o.text=e[5].text),n=new pt({props:o}),M.push((()=>C(n,"text",c))),{key:t,first:null,c(){s=A(),D(n.$$.fragment),this.h()},l(t){s=A(),B(n.$$.fragment,t),this.h()},h(){this.first=s},m(t,e){u(t,s,e),P(n,t,e),l=!0},p(t,s){e=t;const l={};2&s&&(l.x=e[5].x),2&s&&(l.y=e[5].y),!a&&2&s&&(a=!0,l.text=e[5].text,R((()=>a=!1))),n.$set(l)},i(t){l||(L(n.$$.fragment,t),l=!0)},o(t){j(n.$$.fragment,t),l=!1},d(t){t&&r(s),S(n,t)}}}function $t(t){let e,s,n=void 0!==t[1]&&vt(t);return{c(){n&&n.c(),e=A()},l(t){n&&n.l(t),e=A()},m(t,a){n&&n.m(t,a),u(t,e,a),s=!0},p(t,[s]){void 0!==t[1]?n?(n.p(t,s),2&s&&L(n,1)):(n=vt(t),n.c(),L(n,1),n.m(e.parentNode,e)):n&&(k(),j(n,1,1,(()=>{n=null})),O())},i(t){s||(L(n),s=!0)},o(t){j(n),s=!1},d(t){n&&n.d(t),t&&r(e)}}}function xt(t,e,s){let n,a;$(t,F,(t=>s(1,n=t)));return[a,n,t=>{const e=a.getBoundingClientRect(),s=t.clientX-e.left,l=t.clientY-e.top;x(F,n.annotations=[...n.annotations,{id:N(),x:s,y:l,text:""}],n)},function(t){M[t?"unshift":"push"]((()=>{a=t,s(0,a)}))},function(e,s){t.$$.not_equal(s.text,e)&&(s.text=e,F.set(n))}]}class yt extends s{constructor(t){super(),n(this,t,xt,$t,a,{})}}function Et(t,e,s){const n=t.slice();return n[4]=e[s],n}function wt(t,e){let s,n,a,h,v,g,$=e[4]+"";return{key:t,first:null,c(){s=l("button"),n=y($),a=d(),this.h()},l(t){s=c(t,"BUTTON",{id:!0,class:!0});var e=o(s);n=E(e,$),a=p(e),e.forEach(r),this.h()},h(){i(s,"id",h=e[4]),i(s,"class","svelte-1ykrcnt"),V(s,"selected",e[0]===e[4]),this.first=s},m(t,l){u(t,s,l),m(s,n),m(s,a),v||(g=f(s,"click",e[2]),v=!0)},p(t,a){e=t,2&a&&$!==($=e[4]+"")&&w(n,$),2&a&&h!==(h=e[4])&&i(s,"id",h),3&a&&V(s,"selected",e[0]===e[4])},d(t){t&&r(s),v=!1,g()}}}function bt(t){let e,s=[],n=new Map,a=t[1];const f=t=>t[4];for(let l=0;l<a.length;l+=1){let e=Et(t,a,l),c=f(e);n.set(c,s[l]=wt(c,e))}return{c(){e=l("section");for(let t=0;t<s.length;t+=1)s[t].c();this.h()},l(t){e=c(t,"SECTION",{class:!0});var n=o(e);for(let e=0;e<s.length;e+=1)s[e].l(n);n.forEach(r),this.h()},h(){i(e,"class","svelte-1ykrcnt")},m(t,n){u(t,e,n);for(let a=0;a<s.length;a+=1)s[a].m(e,null)},p(t,[l]){7&l&&(a=t[1],s=b(s,l,f,1,t,a,n,e,U,wt,null,Et))},i:h,o:h,d(t){t&&r(e);for(let e=0;e<s.length;e+=1)s[e].d()}}}function Ut(t,e,s){let{options:n=[]}=e,{selectedOption:a=""}=e;const l=q();return t.$$set=t=>{"options"in t&&s(1,n=t.options),"selectedOption"in t&&s(0,a=t.selectedOption)},[a,n,t=>{const e=t.target;s(0,a=e.textContent.trim()),l("select",a)}]}class Nt extends s{constructor(t){super(),n(this,t,Ut,bt,a,{options:1,selectedOption:0})}}const Tt=["Arugula","Kale","Basil"],kt=[{key:"group",message:"A plant group is required."}];function It(t){let e,s,n,a,h,$,x,b,U,N,T,k,I,O,A,R,M,C,V,q,J,K,F,H,Q,Y,W,Z,tt,et=t[0].temp?"Upload":"Update";return n=new yt({}),k=new Nt({props:{selectedOption:t[0].group,options:Tt}}),k.$on("select",t[2]),{c(){e=l("div"),s=l("section"),D(n.$$.fragment),a=d(),h=l("div"),$=l("span"),x=l("small"),b=d(),U=l("small"),N=y("Tap image to add annotations"),T=d(),D(k.$$.fragment),I=d(),O=l("textarea"),A=d(),R=l("div"),M=l("button"),C=l("span"),V=d(),q=y(et),J=d(),K=l("button"),F=l("span"),H=y("\n            Delete"),this.h()},l(t){e=c(t,"DIV",{class:!0});var l=o(e);s=c(l,"SECTION",{class:!0});var i=o(s);B(n.$$.fragment,i),a=p(i),h=c(i,"DIV",{class:!0});var u=o(h);$=c(u,"SPAN",{});var f=o($);x=c(f,"SMALL",{class:!0}),o(x).forEach(r),b=p(f),U=c(f,"SMALL",{});var d=o(U);N=E(d,"Tap image to add annotations"),d.forEach(r),f.forEach(r),T=p(u),B(k.$$.fragment,u),I=p(u),O=c(u,"TEXTAREA",{placeholder:!0,class:!0}),o(O).forEach(r),A=p(u),R=c(u,"DIV",{class:!0});var m=o(R);M=c(m,"BUTTON",{class:!0});var v=o(M);C=c(v,"SPAN",{class:!0}),o(C).forEach(r),V=p(v),q=E(v,et),v.forEach(r),J=p(m),K=c(m,"BUTTON",{class:!0});var g=o(K);F=c(g,"SPAN",{class:!0}),o(F).forEach(r),H=E(g,"\n            Delete"),g.forEach(r),m.forEach(r),u.forEach(r),i.forEach(r),l.forEach(r),this.h()},h(){i(x,"class","icon-write"),i(O,"placeholder","Notes"),i(O,"class","svelte-1oec053"),i(C,"class","icon-up svelte-1oec053"),i(M,"class","submit svelte-1oec053"),i(F,"class","icon-cross svelte-1oec053"),i(K,"class","cancel svelte-1oec053"),i(R,"class","actions svelte-1oec053"),i(h,"class","inputs svelte-1oec053"),i(s,"class","modal"),i(e,"class","background svelte-1oec053")},m(l,c){u(l,e,c),m(e,s),P(n,s,null),m(s,a),m(s,h),m(h,$),m($,x),m($,b),m($,U),m(U,N),m(h,T),P(k,h,null),m(h,I),m(h,O),v(O,t[0].notes),m(h,A),m(h,R),m(R,M),m(M,C),m(M,V),m(M,q),m(R,J),m(R,K),m(K,F),m(K,H),W=!0,Z||(tt=[f(O,"input",t[4]),f(M,"click",t[1]),f(K,"click",t[3])],Z=!0)},p(t,e){const s={};1&e&&(s.selectedOption=t[0].group),k.$set(s),1&e&&v(O,t[0].notes),(!W||1&e)&&et!==(et=t[0].temp?"Upload":"Update")&&w(q,et)},i(t){W||(L(n.$$.fragment,t),L(k.$$.fragment,t),_((()=>{Q||(Q=z(s,G,{y:20,duration:300},!0)),Q.run(1)})),_((()=>{Y||(Y=z(e,X,{duration:300},!0)),Y.run(1)})),W=!0)},o(t){j(n.$$.fragment,t),j(k.$$.fragment,t),Q||(Q=z(s,G,{y:20,duration:300},!1)),Q.run(0),Y||(Y=z(e,X,{duration:300},!1)),Y.run(0),W=!1},d(t){t&&r(e),S(n),S(k),t&&Q&&Q.end(),t&&Y&&Y.end(),Z=!1,g(tt)}}}function Ot(t){let e,s,n=void 0!==t[0]&&It(t);return{c(){n&&n.c(),e=A()},l(t){n&&n.l(t),e=A()},m(t,a){n&&n.m(t,a),u(t,e,a),s=!0},p(t,[s]){void 0!==t[0]?n?(n.p(t,s),1&s&&L(n,1)):(n=It(t),n.c(),L(n,1),n.m(e.parentNode,e)):n&&(k(),j(n,1,1,(()=>{n=null})),O())},i(t){s||(L(n),s=!0)},o(t){j(n),s=!1},d(t){n&&n.d(t),t&&r(e)}}}function Lt(t,e,s){let n,a;$(t,F,(t=>s(0,n=t))),$(t,H,(t=>s(5,a=t)));return[n,t=>{for(const{key:e,message:s}of kt){const t=n[e];if(""===t||null==t)return alert(s)}!0===n.temp?(delete n.temp,x(H,a=[n,...a],a)):H.set(a),x(F,n=void 0,n)},t=>{x(F,n.group=t.detail,n)},t=>{if(!0!==n.temp){const{id:t}=n,e=a.findIndex((e=>e.id===t));a.splice(e,1),H.set(a)}x(F,n=void 0,n)},function(){n.notes=this.value,F.set(n)}]}class jt extends s{constructor(t){super(),n(this,t,Lt,Ot,a,{})}}function At(t){let e,s,n,a,i,f,v,g,$;return s=new et({}),a=new ot({}),f=new ft({}),g=new jt({}),{c(){e=l("main"),D(s.$$.fragment),n=d(),D(a.$$.fragment),i=d(),D(f.$$.fragment),v=d(),D(g.$$.fragment)},l(t){e=c(t,"MAIN",{});var l=o(e);B(s.$$.fragment,l),n=p(l),B(a.$$.fragment,l),i=p(l),B(f.$$.fragment,l),v=p(l),B(g.$$.fragment,l),l.forEach(r)},m(t,l){u(t,e,l),P(s,e,null),m(e,n),P(a,e,null),m(e,i),P(f,e,null),m(e,v),P(g,e,null),$=!0},p:h,i(t){$||(L(s.$$.fragment,t),L(a.$$.fragment,t),L(f.$$.fragment,t),L(g.$$.fragment,t),$=!0)},o(t){j(s.$$.fragment,t),j(a.$$.fragment,t),j(f.$$.fragment,t),j(g.$$.fragment,t),$=!1},d(t){t&&r(e),S(s),S(a),S(f),S(g)}}}function Dt(t,e,s){let n;$(t,H,(t=>s(0,n=t)));var a=this&&this.__awaiter||function(t,e,s,n){return new(s||(s=Promise))((function(a,l){function c(t){try{r(n.next(t))}catch(e){l(e)}}function o(t){try{r(n.throw(t))}catch(e){l(e)}}function r(t){var e;t.done?a(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(c,o)}r((n=n.apply(t,e||[])).next())}))};return J((()=>a(void 0,void 0,void 0,(function*(){K.config({name:"Plant Micro Observer",driver:K.INDEXEDDB});const t=(yield K.getItem("images"))||[];for(const e of t)e.objectURL=URL.createObjectURL(e.blob);x(H,n=t,n),H.subscribe((t=>a(void 0,void 0,void 0,(function*(){yield K.setItem("images",t)}))))})))),[]}new class extends s{constructor(t){super(),n(this,t,Dt,At,a,{})}}({target:document.body});
